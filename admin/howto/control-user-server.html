

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>User server management &#8212; 2i2c Community Showcase Handbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'admin/howto/control-user-server';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Network Policy" href="../topics/network.html" />
    <link rel="prev" title="User authentication and access" href="manage-users.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="2i2c Community Showcase Handbook - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="2i2c Community Showcase Handbook - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    Service Guide
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">About the service</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../about/service/options.html">Usecases and prices</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/distributions/index.html">Overview of hub features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/distributions/education.html">Education and teaching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/distributions/research.html">Research and collaboration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../about/service/index.html">Our collaborative service model</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/service/shared-responsibility.html">Shared responsibility model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/service/service-objectives.html">Service Level Objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/service/comparison.html">Comparison to similar services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://infrastructure.2i2c.org/reference/hubs/">See a table of our running hubs!</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Use the hub</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../user/topics/policy/index.html">User policies</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/policy/code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/policy/acceptable-use.html">Acceptable Use Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/policy/privacy.html">Privacy Policy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../user/topics/data/index.html">Data and Filesystem</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/data/filesystem.html">Filesystem and user directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/data/git.html">Use Git / GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/data/sharing.html">Share data files with your users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user/topics/data/cloud.html">Cloud Object Storage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/howto/specify-unlisted-image.html">Starting and customizing the software environment of a user server</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Administer the hub</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="support.html">Get support</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurator.html">Configure the hub with the Configurator</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="environment/index.html">User environment and interface</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="environment/hub-user-image-template-guide.html">Create a custom user image for your hub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manage-users.html">User authentication and access</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">User server management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/network.html">Network Policy</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Community leadership</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../community/events.html">Events and workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/strategy.html">Community strategy and organizing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/content/authoring.html">How do I Author and Preview Content using Jupyter Book?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/content/sharing.html">Content creation and sharing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Community representatives</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="new-hub.html">Begin a new hub service</a></li>
<li class="toctree-l1"><a class="reference internal" href="replicate.html">Migrate off of a JupyterHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-billing-account.html">Billing and cloud accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topic/cloud-costs.html">Estimate cloud costs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../reference/terminology.html">Terminology reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.io/2i2c-org/community-showcase" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.io/2i2c-org/community-showcase/issues/new?title=Issue%20on%20page%20%2Fadmin/howto/control-user-server.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/admin/howto/control-user-server.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>User server management</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-control-of-a-user-s-server">Take control of a user’s server</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-a-user-s-server">Access a user’s server</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-user-logs">Access user logs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-or-start-a-user-s-server">Stop or start a user’s server</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-servers-after-inactivity">Stop user servers after inactivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-servers-after-maximum-age">Stop user servers after maximum age</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-kernels-after-inactivity">Stop user kernels after inactivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#disable-hub-access-for-all-users">Disable hub access for all users</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="user-server-management">
<h1>User server management<a class="headerlink" href="#user-server-management" title="Permalink to this heading">#</a></h1>
<section id="take-control-of-a-user-s-server">
<h2>Take control of a user’s server<a class="headerlink" href="#take-control-of-a-user-s-server" title="Permalink to this heading">#</a></h2>
<p>Hub admins can unilaterally perform actions on a user’s server via the
<strong>Administrator’s Panel</strong>. These are primarily used to debug a user’s session
easily.</p>
<p>You can access the admin panel by clicking the <span class="guilabel">Admin</span> button in the top bar
in your hub control panel.  Alternatively, you can go to this URL in your
browser: <code class="docutils literal notranslate"><span class="pre">https://&lt;your-hub-url&gt;/hub/admin</span></code>.</p>
<section id="access-a-user-s-server">
<span id="user-server-access"></span><h3>Access a user’s server<a class="headerlink" href="#access-a-user-s-server" title="Permalink to this heading">#</a></h3>
<p>Accessing a user’s server is useful when trying to debug or reproduce an issue they might have. This facility is available to admins via the admin panel.</p>
<ol class="arabic">
<li><p>In the admin panel, you can click <span class="guilabel">access server</span> to gain control of a user’s
currently running server. If it isn’t running, you can click <span class="guilabel">start server</span>
first and wait for it to start.</p>
<figure class="align-default" id="id1">
<img alt="../../_images/access-server.png" src="../../_images/access-server.png" />
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Clicking “access server” will allow you to control the user’s session.</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>This will bring you to the default interface that the user would have seen if they had just logged into the hub. From here, you can navigate to the notebook the user has reported issues with, and help them debug.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you both work on the same notebook at the same time, you will just
overwrite each other’s code! The state of the notebook will be that of
whoever saved the notebook last. There is no Google Docs’ style
real-time collaboration yet, although <a class="reference external" href="https://github.com/jupyterlab/rtc">it is coming</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When you control a user’s server, all of your actions will be run <em>as
if the user ran it themselves</em>. This can be confusing for some users
and is generally not best-practice. We recommend telling users when
you are taking over their session, and using this feature mostly to understand what the user was trying to do, rather than to make major
changes to their code or notebook outputs.</p>
</div>
</li>
</ol>
</section>
<section id="access-user-logs">
<h3>Access user logs<a class="headerlink" href="#access-user-logs" title="Permalink to this heading">#</a></h3>
<p>For user images that are <a class="reference internal" href="environment/index.html#environment-image"><span class="std std-ref">built with repo2docker</span></a> and that do not define a custom <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, the logs of each user’s Jupyter server are located in their home directory, at <code class="docutils literal notranslate"><span class="pre">~/.jupyter-server-log.txt</span></code>.
These contain information about every event that occurred as a part of a user’s session, and are useful for debugging unexpected errors and problems.</p>
<p>For example, to print the contents of your own user server log:</p>
<ol class="arabic">
<li><p>Open a terminal (e.g., choosing <span class="guilabel">Terminal</span> from Launcher in JupyterLab)</p></li>
<li><p>Run the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>~/.jupyter-server-log.txt
</pre></div>
</div>
</li>
</ol>
<p>To access a <strong>different user’s</strong> server logs, you can <a class="reference internal" href="#user-server-access"><span class="std std-ref">access their server</span></a> and run the same command above to print their logs.</p>
</section>
<section id="stop-or-start-a-user-s-server">
<span id="user-server-stopping"></span><h3>Stop or start a user’s server<a class="headerlink" href="#stop-or-start-a-user-s-server" title="Permalink to this heading">#</a></h3>
<p>Sometimes, you need to just turn a user’s server on and off. You can
also do this from the admin interface, by hitting the <span class="guilabel">Stop server</span>
button, waiting for the server to stop, and the <span class="guilabel">Start server</span> button
again.</p>
<p>This is particularly useful when their session might have gotten
out of whack by packages they’ve installed temporarily that screwed up
the default, since a restart will wipe the slate clean.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When a user’s server is stopped (by an admin, or by the user themselves), no data is lost in the user’s home directory.
However, any packages temporarily installed via <code class="docutils literal notranslate"><span class="pre">!pip</span></code> or <code class="docutils literal notranslate"><span class="pre">!conda</span></code> are cleared, to make sure that everyone in the hub is operating from the same clean environment as much as
possible.
Active notebooks have their kernel killed as well.</p>
</div>
</section>
</section>
<section id="stop-user-servers-after-inactivity">
<h2>Stop user servers after inactivity<a class="headerlink" href="#stop-user-servers-after-inactivity" title="Permalink to this heading">#</a></h2>
<p>To ensure efficient resource usage, user servers without interactive usage for a
period of time (default <code class="docutils literal notranslate"><span class="pre">1h</span></code>) are automatically stopped (via
<a class="reference external" href="https://github.com/jupyterhub/jupyterhub-idle-culler">jupyterhub-idle-culler</a>).
This means your user server might be stopped for inactivity even if you have
a long running process in the notebook. This timeout can be configured.</p>
<p>“Culling a user server” has the same effect as <a class="reference internal" href="#user-server-stopping"><span class="std std-ref">stopping a user
server</span></a>, but should be distinguished from “culling a
kernel” inside a user server. <a class="reference external" href="https://github.com/jupyterhub/jupyterhub-idle-culler">jupyterhub-idle-culler</a> is only involved in
culling user servers, not culling kernels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A crude way to <a class="reference external" href="https://github.com/jupyterhub/jupyterhub-idle-culler/issues/55#issuecomment-1413510651">ensure that a server isn’t stopped for inactivity</a> can be implemented.</p>
</div>
</section>
<section id="stop-user-servers-after-maximum-age">
<h2>Stop user servers after maximum age<a class="headerlink" href="#stop-user-servers-after-maximum-age" title="Permalink to this heading">#</a></h2>
<p>As a failsafe <a class="reference external" href="https://github.com/jupyterhub/jupyterhub-idle-culler">jupyterhub-idle-culler</a> is by 2i2c’s defaults configured to stop
user servers that has been running for more than 7 days. This max age can be
re-configured.</p>
</section>
<section id="stop-user-kernels-after-inactivity">
<h2>Stop user kernels after inactivity<a class="headerlink" href="#stop-user-kernels-after-inactivity" title="Permalink to this heading">#</a></h2>
<p>In addition to the user <em>server</em>, there may also be culling at the <em>kernel</em> level.
The kernel is the thing that actually “runs code”, and a kernel without any activity for some time means that somebody has not executed code in that time.</p>
<p>By default, kernels will be checked for activity <strong>every <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">minutes</span></code></strong>.
All kernels that haven’t shown activity in <strong>in the last hour</strong> will be stopped by the <a class="reference external" href="https://github.com/jupyterhub/jupyterhub-idle-culler">jupyterhub-idle-culler</a>.</p>
<p>This window can be configured if you’d like to change the window of inactivity needed before user kernels will be stopped.
See the <span class="xref myst">Hub Engineer’s guide</span> for some documentation on this.</p>
</section>
<section id="disable-hub-access-for-all-users">
<h2>Disable hub access for all users<a class="headerlink" href="#disable-hub-access-for-all-users" title="Permalink to this heading">#</a></h2>
<p>In some cases, you may want to temporarily disable hub access for all users.
For example, if you are concerned that users on your hub are taking inappropriate actions, and you wish to stop all activity before investigating.</p>
<p><strong>To prevent all user sessions from starting</strong>, you can use <a class="reference internal" href="configurator.html"><span class="doc std std-doc">the configurator UI</span></a> to choose a user image that does not start.</p>
<ol class="arabic">
<li><p>Go to your hub’s configurator menu (at <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">your</span> <span class="pre">hub</span> <span class="pre">URL</span> <span class="pre">}}/services/configurator</span></code>).</p></li>
<li><p>Under <span class="guilabel">User Docker Image</span>, paste the following text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">busybox</span><span class="p">:</span><span class="n">latest</span>
</pre></div>
</div>
<p>This specifies a user image that is not compatible with JupyterHub, and will prevent user sessions from starting.
You can revert this change by deleting the text and hitting <span class="guilabel">Submit</span> again (or changing it back to its previous value).</p>
</li>
<li><p>Hit <span class="guilabel">Submit</span></p></li>
<li><p><strong>Stop all user sessions</strong> from you Administrator panel.</p>
<p>Go to <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">your</span> <span class="pre">hub</span> <span class="pre">URL</span> <span class="pre">}}/hub/admin</span></code> and click <span class="guilabel">Stop All</span>.</p>
<p>This will stop all user sessions, and they will no longer be able to log in after doing so.</p>
</li>
</ol>
<p>If you do this, you should <a class="reference external" href="https://docs.2i2c.org/en/latest/support.html">notify the 2i2c support team</a> as they may need to follow up with some changes to your infrastructure.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./admin/howto"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="manage-users.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">User authentication and access</p>
      </div>
    </a>
    <a class="right-next"
       href="../topics/network.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Network Policy</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-control-of-a-user-s-server">Take control of a user’s server</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-a-user-s-server">Access a user’s server</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-user-logs">Access user logs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-or-start-a-user-s-server">Stop or start a user’s server</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-servers-after-inactivity">Stop user servers after inactivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-servers-after-maximum-age">Stop user servers after maximum age</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stop-user-kernels-after-inactivity">Stop user kernels after inactivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#disable-hub-access-for-all-users">Disable hub access for all users</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 2i2c
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>